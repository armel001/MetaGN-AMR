Assuming unrestricted shared filesystem usage.
None
host: stallion.srvint.efrei.fr
Building DAG of jobs...
Your conda installation is not configured to use strict channel priorities. This is however important for having robust and correct environments (for details, see https://conda-forge.org/docs/user/tipsandtricks.html). Please consider to configure strict priorities by executing 'conda config --set channel_priority strict'.
Creating conda environment workflow/envs/nanoplot.yaml...
Downloading and installing remote packages.
Cleaning up conda package tarballs.
Environment for /data/armel/git/MetagenAMR-main/workflow/rules/../envs/nanoplot.yaml created (location: .snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_)
Using shell: /usr/bin/bash
Provided cores: 16
Rules claiming more threads will be scaled down.
Job stats:
job                  count
-----------------  -------
abricate                16
all                      1
flye_assembly           13
host_depletion           8
nanoplot                16
plot_ARGs               16
plot_ARGs_all            1
plot_ARGs_all_R          1
plot_ARGs_by_gene       16
porechop                 5
total                   93

Select jobs to execute...
Execute 2 jobs...
[Wed Oct 15 20:38:25 2025]
localrule host_depletion:
    input: results/HI14B/trimmed.fastq.gz, resources/references/GRCh38_no_alt.mmi
    output: results/HI14B/clean/HI14B_noh.fq.gz
    jobid: 67
    reason: Missing output files: results/HI14B/clean/HI14B_noh.fq.gz
    wildcards: sample=HI14B
    threads: 8
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_
[Wed Oct 15 20:38:25 2025]
localrule host_depletion:
    input: results/HI02A/trimmed.fastq.gz, resources/references/GRCh38_no_alt.mmi
    output: results/HI02A/clean/HI02A_noh.fq.gz
    jobid: 39
    reason: Missing output files: results/HI02A/clean/HI02A_noh.fq.gz
    wildcards: sample=HI02A
    threads: 8
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_
Select jobs to execute...
[Wed Oct 15 20:42:28 2025]
Finished jobid: 39 (Rule: host_depletion)
1 of 93 steps (1%) done
Execute 8 jobs...
[Wed Oct 15 20:42:28 2025]
localrule nanoplot:
    input: resources/reads/HI04A.fastq.gz
    output: results/HI04A/qc/HI04A_Nanoplot
    jobid: 8
    reason: Missing output files: results/HI04A/qc/HI04A_Nanoplot
    wildcards: sample=HI04A
    resources: tmpdir=/tmp
[Wed Oct 15 20:42:28 2025]
localrule abricate:
    input: results/HI17B/assembly.fasta
    output: results/HI17B/abricate/HI17B_ARG_summary.tsv
    jobid: 77
    reason: Missing output files: results/HI17B/abricate/HI17B_ARG_summary.tsv
    wildcards: sample=HI17B
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_
Activating conda environment: .snakemake/conda/01528871480f2915ea4485b3da11c9ff_
[Wed Oct 15 20:42:28 2025]
localrule porechop:
    input: resources/reads/HI01A.fastq.gz
    output: results/HI01A/trimmed.fastq.gz
    jobid: 36
    reason: Missing output files: results/HI01A/trimmed.fastq.gz
    wildcards: sample=HI01A
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/2ac72101414847c11936a83efa1608b6_
[Wed Oct 15 20:42:28 2025]
localrule nanoplot:
    input: resources/reads/HI05A.fastq.gz
    output: results/HI05A/qc/HI05A_Nanoplot
    jobid: 9
    reason: Software environment definition has changed since last execution
    wildcards: sample=HI05A
    resources: tmpdir=/tmp
Skipped removing non-empty directory results/HI05A/qc/HI05A_Nanoplot
Activating conda environment: .snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_
[Wed Oct 15 20:42:28 2025]
localrule flye_assembly:
    input: results/CMC_MTM/clean/CMC_MTM_noh.fq.gz
    output: results/CMC_MTM/assembly.fasta
    jobid: 26
    reason: Missing output files: results/CMC_MTM/assembly.fasta
    wildcards: sample=CMC_MTM
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/2b8d26851d42507ad652f148d31ace33_
[Wed Oct 15 20:42:28 2025]
localrule flye_assembly:
    input: results/CMC_CLY/clean/CMC_CLY_noh.fq.gz
    output: results/CMC_CLY/assembly.fasta
    jobid: 18
    reason: Missing output files: results/CMC_CLY/assembly.fasta
    wildcards: sample=CMC_CLY
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/2b8d26851d42507ad652f148d31ace33_
[Wed Oct 15 20:42:28 2025]
localrule nanoplot:
    input: resources/reads/HI01A.fastq.gz
    output: results/HI01A/qc/HI01A_Nanoplot
    jobid: 5
    reason: Software environment definition has changed since last execution
    wildcards: sample=HI01A
    resources: tmpdir=/tmp
Skipped removing non-empty directory results/HI01A/qc/HI01A_Nanoplot
Activating conda environment: .snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_
[Wed Oct 15 20:42:28 2025]
localrule porechop:
    input: resources/reads/HI03A.fastq.gz
    output: results/HI03A/trimmed.fastq.gz
    jobid: 44
    reason: Missing output files: results/HI03A/trimmed.fastq.gz
    wildcards: sample=HI03A
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/2ac72101414847c11936a83efa1608b6_
Select jobs to execute...
[Wed Oct 15 20:42:46 2025]
Finished jobid: 77 (Rule: abricate)
2 of 93 steps (2%) done
Execute 1 jobs...
[Wed Oct 15 20:42:46 2025]
localrule abricate:
    input: results/HI04A/assembly.fasta
    output: results/HI04A/abricate/HI04A_ARG_summary.tsv
    jobid: 45
    reason: Missing output files: results/HI04A/abricate/HI04A_ARG_summary.tsv
    wildcards: sample=HI04A
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/01528871480f2915ea4485b3da11c9ff_
Select jobs to execute...
[Wed Oct 15 20:42:51 2025]
Finished jobid: 45 (Rule: abricate)
3 of 93 steps (3%) done
Execute 1 jobs...
[Wed Oct 15 20:42:51 2025]
localrule plot_ARGs_by_gene:
    input: results/HI04A/abricate/HI04A_ARG_summary.tsv
    output: results/HI04A/plots/HI04A_ARGs_by_gene.png
    jobid: 104
    reason: Missing output files: results/HI04A/plots/HI04A_ARGs_by_gene.png; Input files updated by another job: results/HI04A/abricate/HI04A_ARG_summary.tsv
    wildcards: sample=HI04A
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/f550386a40310a0327be21f8ca3f63dd_
Select jobs to execute...
[Wed Oct 15 20:42:55 2025]
Finished jobid: 104 (Rule: plot_ARGs_by_gene)
4 of 93 steps (4%) done
Execute 1 jobs...
[Wed Oct 15 20:42:55 2025]
localrule nanoplot:
    input: resources/reads/HI15B.fastq.gz
    output: results/HI15B/qc/HI15B_Nanoplot
    jobid: 14
    reason: Missing output files: results/HI15B/qc/HI15B_Nanoplot
    wildcards: sample=HI15B
    resources: tmpdir=/tmp
Activating conda environment: .snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_
Select jobs to execute...
ImproperOutputException in rule nanoplot in file "/data/armel/git/MetagenAMR-main/workflow/rules/nanoplot.smk", line 1:
Outputs of incorrect type (directories when expecting files or vice versa). Output directories must be flagged with directory(). for rule nanoplot:
    output: results/HI04A/qc/HI04A_Nanoplot
    wildcards: sample=HI04A
    affected files:
        results/HI04A/qc/HI04A_Nanoplot
Removing output files of failed job nanoplot since they might be corrupted:
results/HI04A/qc/HI04A_Nanoplot
Skipped removing non-empty directory results/HI04A/qc/HI04A_Nanoplot
ImproperOutputException in rule nanoplot in file "/data/armel/git/MetagenAMR-main/workflow/rules/nanoplot.smk", line 1:
Outputs of incorrect type (directories when expecting files or vice versa). Output directories must be flagged with directory(). for rule nanoplot:
    output: results/HI05A/qc/HI05A_Nanoplot
    wildcards: sample=HI05A
    affected files:
        results/HI05A/qc/HI05A_Nanoplot
Removing output files of failed job nanoplot since they might be corrupted:
results/HI05A/qc/HI05A_Nanoplot
Skipped removing non-empty directory results/HI05A/qc/HI05A_Nanoplot
Terminating processes on user request, this might take some time.
RuleException:
CalledProcessError in file "/data/armel/git/MetagenAMR-main/workflow/rules/flye_assembly.smk", line 9:
Command 'source /home/armel/miniforge3/envs/snakemake-env/bin/activate '/data/armel/git/MetagenAMR-main/.snakemake/conda/2b8d26851d42507ad652f148d31ace33_'; set -euo pipefail;  flye --nano-raw results/CMC_MTM/clean/CMC_MTM_noh.fq.gz --out-dir results/CMC_MTM/flye --threads 24 && cp results/CMC_MTM/flye/assembly.fasta results/CMC_MTM/assembly.fasta' died with <Signals.SIGINT: 2>.
[Wed Oct 15 20:46:04 2025]
Error in rule flye_assembly:
    message: None
    jobid: 26
    input: results/CMC_MTM/clean/CMC_MTM_noh.fq.gz
    output: results/CMC_MTM/assembly.fasta
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/2b8d26851d42507ad652f148d31ace33_
    shell:
        flye --nano-raw results/CMC_MTM/clean/CMC_MTM_noh.fq.gz --out-dir results/CMC_MTM/flye --threads 24 && cp results/CMC_MTM/flye/assembly.fasta results/CMC_MTM/assembly.fasta
        (command exited with non-zero exit code)
RuleException:
CalledProcessError in file "/data/armel/git/MetagenAMR-main/workflow/rules/flye_assembly.smk", line 9:
Command 'source /home/armel/miniforge3/envs/snakemake-env/bin/activate '/data/armel/git/MetagenAMR-main/.snakemake/conda/2b8d26851d42507ad652f148d31ace33_'; set -euo pipefail;  flye --nano-raw results/CMC_CLY/clean/CMC_CLY_noh.fq.gz --out-dir results/CMC_CLY/flye --threads 24 && cp results/CMC_CLY/flye/assembly.fasta results/CMC_CLY/assembly.fasta' died with <Signals.SIGINT: 2>.
[Wed Oct 15 20:46:04 2025]
Error in rule flye_assembly:
    message: None
    jobid: 18
    input: results/CMC_CLY/clean/CMC_CLY_noh.fq.gz
    output: results/CMC_CLY/assembly.fasta
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/2b8d26851d42507ad652f148d31ace33_
    shell:
        flye --nano-raw results/CMC_CLY/clean/CMC_CLY_noh.fq.gz --out-dir results/CMC_CLY/flye --threads 24 && cp results/CMC_CLY/flye/assembly.fasta results/CMC_CLY/assembly.fasta
        (command exited with non-zero exit code)
RuleException:
CalledProcessError in file "/data/armel/git/MetagenAMR-main/workflow/rules/nanoplot.smk", line 9:
Command 'source /home/armel/miniforge3/envs/snakemake-env/bin/activate '/data/armel/git/MetagenAMR-main/.snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_'; set -euo pipefail;  NanoPlot --fastq resources/reads/HI01A.fastq.gz -o results/HI01A/qc/HI01A_Nanoplot -t 24' died with <Signals.SIGINT: 2>.
[Wed Oct 15 20:46:04 2025]
Error in rule nanoplot:
    message: None
    jobid: 5
    input: resources/reads/HI01A.fastq.gz
    output: results/HI01A/qc/HI01A_Nanoplot
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_
    shell:
        NanoPlot --fastq resources/reads/HI01A.fastq.gz -o results/HI01A/qc/HI01A_Nanoplot -t 24
        (command exited with non-zero exit code)
RuleException:
CalledProcessError in file "/data/armel/git/MetagenAMR-main/workflow/rules/nanoplot.smk", line 9:
Command 'source /home/armel/miniforge3/envs/snakemake-env/bin/activate '/data/armel/git/MetagenAMR-main/.snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_'; set -euo pipefail;  NanoPlot --fastq resources/reads/HI15B.fastq.gz -o results/HI15B/qc/HI15B_Nanoplot -t 24' died with <Signals.SIGINT: 2>.
[Wed Oct 15 20:46:04 2025]
Error in rule nanoplot:
    message: None
    jobid: 14
    input: resources/reads/HI15B.fastq.gz
    output: results/HI15B/qc/HI15B_Nanoplot
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/4350ba092f9abb87cd0721a02f8c2c36_
    shell:
        NanoPlot --fastq resources/reads/HI15B.fastq.gz -o results/HI15B/qc/HI15B_Nanoplot -t 24
        (command exited with non-zero exit code)
RuleException:
CalledProcessError in file "/data/armel/git/MetagenAMR-main/workflow/rules/host_depletion.smk", line 11:
Command 'source /home/armel/miniforge3/envs/snakemake-env/bin/activate '/data/armel/git/MetagenAMR-main/.snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_'; set -euo pipefail;  
        minimap2 -ax map-ont resources/references/GRCh38_no_alt.mmi results/HI14B/trimmed.fastq.gz |         samtools view -b -f 4 -@ 8 |         samtools fastq -@ 8 - | gzip > results/HI14B/clean/HI14B_noh.fq.gz' died with <Signals.SIGINT: 2>.
[Wed Oct 15 20:46:04 2025]
Error in rule host_depletion:
    message: None
    jobid: 67
    input: results/HI14B/trimmed.fastq.gz, resources/references/GRCh38_no_alt.mmi
    output: results/HI14B/clean/HI14B_noh.fq.gz
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_
    shell:
        
        minimap2 -ax map-ont resources/references/GRCh38_no_alt.mmi results/HI14B/trimmed.fastq.gz |         samtools view -b -f 4 -@ 8 |         samtools fastq -@ 8 - | gzip > results/HI14B/clean/HI14B_noh.fq.gz
        
        (command exited with non-zero exit code)
