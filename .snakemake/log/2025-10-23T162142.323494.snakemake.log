Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 22
Rules claiming more threads will be scaled down.
Job stats:
job                  count
-----------------  -------
abricate                16
all                      1
build_dag                1
flye_assembly           16
host_depletion          16
merge_rgi_results        1
multiqc_nanoplot         1
nanoplot                 5
plot_ARGs               16
plot_ARGs_all            1
plot_ARGs_all_R          1
plot_ARGs_by_gene       16
porechop                 1
rgi                     16
total                  108

Select jobs to execute...

[Thu Oct 23 16:21:44 2025]
rule host_depletion:
    input: results/HI16B/trimmed.fastq.gz, resources/references/GRCh38_no_alt.mmi
    output: results/HI16B/clean/HI16B_noh.fq.gz
    jobid: 75
    reason: Forced execution
    wildcards: sample=HI16B
    threads: 8
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_

[Thu Oct 23 16:21:44 2025]
rule nanoplot:
    input: resources/reads/HI05A.fastq.gz
    output: results/HI05A/qc/HI05A_Nanoplot
    log: results/HI05A/qc/HI05A_Nanoplot/nanoplot.log
    jobid: 9
    reason: Forced execution
    wildcards: sample=HI05A
    threads: 6
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/de891c6cc03ba77d6d59f6373b0f834e_

[Thu Oct 23 16:21:44 2025]
rule host_depletion:
    input: results/CMC_MTM/trimmed.fastq.gz, resources/references/GRCh38_no_alt.mmi
    output: results/CMC_MTM/clean/CMC_MTM_noh.fq.gz
    jobid: 27
    reason: Forced execution
    wildcards: sample=CMC_MTM
    threads: 8
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_
[Thu Oct 23 16:22:45 2025]
Finished job 9.
1 of 108 steps (1%) done
Select jobs to execute...

[Thu Oct 23 16:22:45 2025]
rule nanoplot:
    input: resources/reads/HI16B.fastq.gz
    output: results/HI16B/qc/HI16B_Nanoplot
    log: results/HI16B/qc/HI16B_Nanoplot/nanoplot.log
    jobid: 15
    reason: Code has changed since last execution
    wildcards: sample=HI16B
    threads: 6
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/de891c6cc03ba77d6d59f6373b0f834e_
[Thu Oct 23 16:25:27 2025]
Finished job 15.
2 of 108 steps (2%) done
Select jobs to execute...

[Thu Oct 23 16:25:27 2025]
rule nanoplot:
    input: resources/reads/HI09B.fastq.gz
    output: results/HI09B/qc/HI09B_Nanoplot
    log: results/HI09B/qc/HI09B_Nanoplot/nanoplot.log
    jobid: 11
    reason: Code has changed since last execution
    wildcards: sample=HI09B
    threads: 6
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/de891c6cc03ba77d6d59f6373b0f834e_
[Thu Oct 23 16:28:04 2025]
Finished job 11.
3 of 108 steps (3%) done
Select jobs to execute...

[Thu Oct 23 16:28:04 2025]
rule nanoplot:
    input: resources/reads/HI03A.fastq.gz
    output: results/HI03A/qc/HI03A_Nanoplot
    log: results/HI03A/qc/HI03A_Nanoplot/nanoplot.log
    jobid: 7
    reason: Code has changed since last execution
    wildcards: sample=HI03A
    threads: 6
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/de891c6cc03ba77d6d59f6373b0f834e_
[Thu Oct 23 16:29:30 2025]
Finished job 75.
4 of 108 steps (4%) done
Select jobs to execute...

[Thu Oct 23 16:29:30 2025]
rule build_dag:
    output: results/workflow_dag.png
    jobid: 132
    reason: Missing output files: results/workflow_dag.png; Code has changed since last execution
    resources: tmpdir=/tmp


[Thu Oct 23 16:29:30 2025]
Activating conda environment: .snakemake/conda/69a93ab51e8a64b6b2f737e3e7392841_
rule nanoplot:
    input: resources/reads/HI14B.fastq.gz
    output: results/HI14B/qc/HI14B_Nanoplot
    log: results/HI14B/qc/HI14B_Nanoplot/nanoplot.log
    jobid: 13
    reason: Code has changed since last execution
    wildcards: sample=HI14B
    threads: 6
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/de891c6cc03ba77d6d59f6373b0f834e_

[Thu Oct 23 16:29:30 2025]
rule flye_assembly:
    input: results/HI16B/clean/HI16B_noh.fq.gz
    output: results/HI16B/assembly.fasta
    jobid: 74
    reason: Input files updated by another job: results/HI16B/clean/HI16B_noh.fq.gz
    wildcards: sample=HI16B
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/2b8d26851d42507ad652f148d31ace33_
[Thu Oct 23 16:29:30 2025]
Error in rule build_dag:
    jobid: 132
    output: results/workflow_dag.png
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/69a93ab51e8a64b6b2f737e3e7392841_
    shell:
        
        echo "Génération du DAG du pipeline..."
        snakemake --dag | dot -Tpng > results/workflow_dag.png
        echo "DAG généré : results/workflow_dag.png"
        
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Removing output files of failed job build_dag since they might be corrupted:
results/workflow_dag.png
[Thu Oct 23 16:30:14 2025]
Finished job 7.
5 of 108 steps (5%) done
[Thu Oct 23 16:32:15 2025]
Finished job 13.
6 of 108 steps (6%) done
[Thu Oct 23 16:33:02 2025]
Finished job 27.
7 of 108 steps (6%) done
Terminating processes on user request, this might take some time.
Cancelling snakemake on user request.
