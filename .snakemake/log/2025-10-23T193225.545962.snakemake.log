Building DAG of jobs...
Using shell: /usr/bin/bash
Provided cores: 22
Rules claiming more threads will be scaled down.
Job stats:
job                  count
-----------------  -------
abricate                16
all                      1
flye_assembly           16
host_depletion          12
merge_rgi_results        1
plot_ARGs               16
plot_ARGs_all            1
plot_ARGs_by_gene       16
porechop                 1
rgi                     16
total                   96

Select jobs to execute...

[Thu Oct 23 19:32:27 2025]
rule host_depletion:
    input: results/CMC_MNR/trimmed.fastq.gz, resources/references/GRCh38_no_alt.mmi
    output: results/CMC_MNR/clean/CMC_MNR_noh.fq.gz
    jobid: 7
    reason: Code has changed since last execution
    wildcards: sample=CMC_MNR
    threads: 8
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_

[Thu Oct 23 19:32:28 2025]
rule host_depletion:
    input: results/HI07A/trimmed.fastq.gz, resources/references/GRCh38_no_alt.mmi
    output: results/HI07A/clean/HI07A_noh.fq.gz
    jobid: 39
    reason: Code has changed since last execution
    wildcards: sample=HI07A
    threads: 8
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/9a23c77602d9d35c4fdf433a71fcdfe1_

[Thu Oct 23 19:32:28 2025]
rule flye_assembly:
    input: results/HI04A/clean/HI04A_noh.fq.gz
    output: results/HI04A/assembly.fasta
    jobid: 30
    reason: Missing output files: results/HI04A/assembly.fasta; Updated input files: results/HI04A/clean/HI04A_noh.fq.gz
    wildcards: sample=HI04A
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/2b8d26851d42507ad652f148d31ace33_

[Thu Oct 23 19:32:28 2025]
rule flye_assembly:
    input: results/HI16B/clean/HI16B_noh.fq.gz
    output: results/HI16B/assembly.fasta
    jobid: 58
    reason: Missing output files: results/HI16B/assembly.fasta; Updated input files: results/HI16B/clean/HI16B_noh.fq.gz
    wildcards: sample=HI16B
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/2b8d26851d42507ad652f148d31ace33_

[Thu Oct 23 19:32:28 2025]
rule flye_assembly:
    input: results/HI05A/clean/HI05A_noh.fq.gz
    output: results/HI05A/assembly.fasta
    jobid: 34
    reason: Missing output files: results/HI05A/assembly.fasta; Updated input files: results/HI05A/clean/HI05A_noh.fq.gz
    wildcards: sample=HI05A
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/2b8d26851d42507ad652f148d31ace33_

[Thu Oct 23 19:32:28 2025]
rule porechop:
    input: resources/reads/HI17B.fastq.gz
    output: results/HI17B/trimmed.fastq.gz
    jobid: 64
    reason: Missing output files: results/HI17B/trimmed.fastq.gz; Code has changed since last execution
    wildcards: sample=HI17B
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/2ac72101414847c11936a83efa1608b6_

[Thu Oct 23 19:32:28 2025]
rule flye_assembly:
    input: results/CMC_MTM/clean/CMC_MTM_noh.fq.gz
    output: results/CMC_MTM/assembly.fasta
    jobid: 10
    reason: Missing output files: results/CMC_MTM/assembly.fasta; Updated input files: results/CMC_MTM/clean/CMC_MTM_noh.fq.gz
    wildcards: sample=CMC_MTM
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/2b8d26851d42507ad652f148d31ace33_
[Thu Oct 23 19:38:09 2025]
Finished job 30.
1 of 96 steps (1%) done
Select jobs to execute...

[Thu Oct 23 19:38:09 2025]
rule abricate:
    input: results/HI04A/assembly.fasta
    output: results/HI04A/abricate/HI04A_ARG_summary.tsv
    jobid: 29
    reason: Input files updated by another job: results/HI04A/assembly.fasta
    wildcards: sample=HI04A
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/01528871480f2915ea4485b3da11c9ff_
[Thu Oct 23 19:38:21 2025]
Finished job 29.
2 of 96 steps (2%) done
Select jobs to execute...

[Thu Oct 23 19:38:21 2025]
rule plot_ARGs:
    input: results/HI04A/abricate/HI04A_ARG_summary.tsv
    output: results/HI04A/plots/HI04A_resistance_classes.png
    jobid: 72
    reason: Input files updated by another job: results/HI04A/abricate/HI04A_ARG_summary.tsv
    wildcards: sample=HI04A
    resources: tmpdir=/tmp

[Thu Oct 23 19:38:21 2025]
rule plot_ARGs_by_gene:
    input: results/HI04A/abricate/HI04A_ARG_summary.tsv
    output: results/HI04A/plots/HI04A_ARGs_by_gene.png
    jobid: 88
    reason: Input files updated by another job: results/HI04A/abricate/HI04A_ARG_summary.tsv
    wildcards: sample=HI04A
    resources: tmpdir=/tmp

Activating conda environment: .snakemake/conda/f550386a40310a0327be21f8ca3f63dd_
Activating conda environment: .snakemake/conda/f550386a40310a0327be21f8ca3f63dd_
Activating conda environment: .snakemake/conda/f550386a40310a0327be21f8ca3f63dd_
[Thu Oct 23 19:38:30 2025]
Finished job 88.
3 of 96 steps (3%) done
Select jobs to execute...
[Thu Oct 23 19:38:30 2025]
Finished job 72.
4 of 96 steps (4%) done
Terminating processes on user request, this might take some time.
[Thu Oct 23 19:38:48 2025]
Error in rule flye_assembly:
    jobid: 34
    input: results/HI05A/clean/HI05A_noh.fq.gz
    output: results/HI05A/assembly.fasta
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/2b8d26851d42507ad652f148d31ace33_
    shell:
        flye --nano-raw results/HI05A/clean/HI05A_noh.fq.gz --out-dir results/HI05A/flye --threads 24 && cp results/HI05A/flye/assembly.fasta results/HI05A/assembly.fasta
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Thu Oct 23 19:38:48 2025]
Error in rule flye_assembly:
    jobid: 58
    input: results/HI16B/clean/HI16B_noh.fq.gz
    output: results/HI16B/assembly.fasta
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/2b8d26851d42507ad652f148d31ace33_
    shell:
        flye --nano-raw results/HI16B/clean/HI16B_noh.fq.gz --out-dir results/HI16B/flye --threads 24 && cp results/HI16B/flye/assembly.fasta results/HI16B/assembly.fasta
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

[Thu Oct 23 19:38:48 2025]
Error in rule flye_assembly:
    jobid: 10
    input: results/CMC_MTM/clean/CMC_MTM_noh.fq.gz
    output: results/CMC_MTM/assembly.fasta
    conda-env: /data/armel/git/MetagenAMR-main/.snakemake/conda/2b8d26851d42507ad652f148d31ace33_
    shell:
        flye --nano-raw results/CMC_MTM/clean/CMC_MTM_noh.fq.gz --out-dir results/CMC_MTM/flye --threads 24 && cp results/CMC_MTM/flye/assembly.fasta results/CMC_MTM/assembly.fasta
        (one of the commands exited with non-zero exit code; note that snakemake uses bash strict mode!)

Cancelling snakemake on user request.
